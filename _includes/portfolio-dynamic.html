{% assign portfolio_md = site.static_files | where: "name", "items.md" | first %}
{% if portfolio_md %}
  {% assign portfolio_content = portfolio_md.content %}
{% else %}
  {% capture portfolio_content %}{% include_relative _portfolio/items.md %}{% endcapture %}
{% endif %}

<!-- Portfolio Grid (Generated from _data/portfolio.yml) -->
<div class="portfolio-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin: 3rem 0;">
  
  {% for item in site.data.portfolio.portfolio_items %}
  <div class="portfolio-item" style="text-align: center; padding: 2rem; border: 1px solid #e0e0e0; border-radius: 8px; transition: transform 0.3s ease;">
    <a href="{{ item.link }}" style="text-decoration: none; color: inherit;">
      <img src="{{ item.image }}" alt="{{ item.title }}" style="width: 100%; height: 200px; object-fit: cover; border-radius: 4px; background: {{ item.gradient }}; margin-bottom: 1rem;" onerror="this.style.background='{{ item.gradient }}'; this.style.display='block';">
      <h2 style="margin: 1rem 0 0.5rem 0; color: #333;">{{ item.title }}</h2>
      <p style="color: #666; line-height: 1.5;">{{ item.description }}</p>
    </a>
  </div>
  {% endfor %}

</div>

<!-- Fallback: Markdown Portfolio -->
<div class="portfolio-markdown" style="display: none;">
{{ portfolio_content | markdownify }}
</div>

<style>
.portfolio-item:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}

/* Show markdown version if data fails to load */
.portfolio-grid:empty + .portfolio-markdown {
  display: block;
}
</style>
